System.register([],function(b){"use strict";return{execute:function(){b("atom",N);let L=0;function N(i,l){const w=`atom${++L}`,d={toString:()=>w};return typeof i=="function"?d.read=i:(d.init=i,d.read=m=>m(d),d.write=(m,z,h)=>z(d,typeof h=="function"?h(m(d)):h)),l&&(d.write=l),d}const C=i=>"init"in i,q=i=>!!i.write,E=new WeakMap,R=(i,l)=>{E.set(i,l),i.catch(()=>{}).finally(()=>E.delete(i))},B=(i,l)=>{const w=E.get(i);w&&(E.delete(i),w(l))},F=(i,l)=>{i.status="fulfilled",i.value=l},G=(i,l)=>{i.status="rejected",i.reason=l},T=i=>typeof(i==null?void 0:i.then)=="function",M=(i,l)=>"v"in i&&"v"in l&&Object.is(i.v,l.v),H=(i,l)=>"e"in i&&"e"in l&&Object.is(i.e,l.e),y=i=>"v"in i&&i.v instanceof Promise,U=(i,l)=>"v"in i&&"v"in l&&i.v.orig&&i.v.orig===l.v.orig,S=i=>{if("e"in i)throw i.e;return i.v},V=b("createStore",()=>{const i=new WeakMap,l=new WeakMap,w=new Map,d=t=>i.get(t),m=(t,n)=>{const r=i.get(t);if(i.set(t,n),w.has(t)||w.set(t,r),r&&y(r)){const e="v"in n?n.v instanceof Promise?n.v:Promise.resolve(n.v):Promise.reject(n.e);B(r.v,e)}},z=(t,n,r)=>{const e=new Map;let s=!1;r.forEach((o,c)=>{!o&&c===t&&(o=n),o&&(e.set(c,o),n.d.get(c)!==o&&(s=!0))}),(s||n.d.size!==e.size)&&(n.d=e)},h=(t,n,r)=>{const e=d(t),s={d:(e==null?void 0:e.d)||new Map,v:n};if(r&&z(t,s,r),e&&M(e,s)&&e.d===s.d)return e;if(e&&y(e)&&y(s)&&U(e,s)){if(e.d===s.d)return e;s.v=e.v}return m(t,s),s},I=(t,n,r,e)=>{if(T(n)){let s;const o=new Promise((c,f)=>{let v=!1;n.then(a=>{if(!v){v=!0;const u=d(t),g=h(t,o,r);F(o,a),c(a),(u==null?void 0:u.d)!==g.d&&D(t,g,u==null?void 0:u.d)}},a=>{if(!v){v=!0;const u=d(t),g=h(t,o,r);G(o,a),f(a),(u==null?void 0:u.d)!==g.d&&D(t,g,u==null?void 0:u.d)}}),s=a=>{v||(v=!0,a.then(u=>F(o,u),u=>G(o,u)),c(a))}});return o.orig=n,o.status="pending",R(o,c=>{c&&s(c),e==null||e()}),h(t,o,r)}return h(t,n,r)},_=(t,n,r)=>{const e=d(t),s={d:(e==null?void 0:e.d)||new Map,e:n};return r&&z(t,s,r),e&&H(e,s)&&e.d===s.d?e:(m(t,s),s)},p=(t,n)=>{const r=d(t);if(!n&&r&&(l.has(t)||Array.from(r.d).every(([a,u])=>a===t||p(a)===u)))return r;const e=new Map;let s=!0;const o=a=>{if(a===t){const g=d(a);if(g)return e.set(a,g),S(g);if(C(a))return e.set(a,void 0),a.init;throw new Error("no atom init")}const u=p(a);return e.set(a,u),S(u)};let c,f;const v={get signal(){return c||(c=new AbortController),c.signal},get setSelf(){return!f&&q(t)&&(f=(...a)=>{if(!s)return P(t,...a)}),f}};try{const a=t.read(o,v);return I(t,a,e,()=>c==null?void 0:c.abort())}catch(a){return _(t,a,e)}finally{s=!1}},$=t=>S(p(t)),x=t=>{let n=l.get(t);return n||(n=j(t)),n},k=(t,n)=>!n.l.size&&(!n.t.size||n.t.size===1&&n.t.has(t)),K=t=>{const n=l.get(t);n&&k(t,n)&&W(t)},Q=t=>{const n=new Map,r=new WeakMap,e=o=>{const c=l.get(o);c==null||c.t.forEach(f=>{f!==o&&(n.set(f,(n.get(f)||new Set).add(o)),r.set(f,(r.get(f)||0)+1),e(f))})};e(t);const s=o=>{const c=l.get(o);c==null||c.t.forEach(f=>{var v;if(f!==o){let a=r.get(f);if(a&&r.set(f,--a),!a){let u=!!((v=n.get(f))!=null&&v.size);if(u){const g=d(f),X=p(f,!0);u=!g||!M(g,X)}u||n.forEach(g=>g.delete(f))}s(f)}})};s(t)},J=(t,...n)=>{let r=!0;const e=c=>S(p(c)),s=(c,...f)=>{let v;if(c===t){if(!C(c))throw new Error("atom not writable");const a=d(c),u=I(c,f[0]);(!a||!M(a,u))&&Q(c)}else v=J(c,...f);return r||O(),v},o=t.write(e,s,...n);return r=!1,o},P=(t,...n)=>{const r=J(t,...n);return O(),r},j=(t,n)=>{var r;(r=d(t))==null||r.d.forEach((s,o)=>{const c=l.get(o);c?c.t.add(t):o!==t&&j(o,t)}),p(t);const e={t:new Set(n&&[n]),l:new Set};if(l.set(t,e),q(t)&&t.onMount){const s=t.onMount((...o)=>P(t,...o));s&&(e.u=s)}return e},W=t=>{var n;const r=(n=l.get(t))==null?void 0:n.u;r&&r(),l.delete(t);const e=d(t);e&&(y(e)&&B(e.v),e.d.forEach((s,o)=>{if(o!==t){const c=l.get(o);c&&(c.t.delete(t),k(o,c)&&W(o))}}))},D=(t,n,r)=>{const e=new Set(n.d.keys());r==null||r.forEach((s,o)=>{if(e.has(o)){e.delete(o);return}const c=l.get(o);c&&(c.t.delete(t),k(o,c)&&W(o))}),e.forEach(s=>{const o=l.get(s);o?o.t.add(t):l.has(t)&&j(s,t)})},O=()=>{for(;w.size;){const t=Array.from(w);w.clear(),t.forEach(([n,r])=>{const e=d(n);if(e){e.d!==(r==null?void 0:r.d)&&D(n,e,r==null?void 0:r.d);const s=l.get(n);s&&!(r&&!y(r)&&(M(r,e)||H(r,e)))&&s.l.forEach(o=>o())}})}};return{get:$,set:P,sub:(t,n)=>{const r=x(t);O();const e=r.l;return e.add(n),()=>{e.delete(n),K(t)}}}});let A;const Y=b("getDefaultStore",()=>(A||(A=V()),A))}}});
